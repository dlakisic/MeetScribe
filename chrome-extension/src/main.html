<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>MeetScribe Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Outfit:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="main.css">
</head>

<body>

  <!-- Sidebar: Meeting History -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <img src="../icons/icon48.png" alt="Logo">
      <h1>MeetScribe</h1>
    </div>
    <div class="sidebar-search">
      <input type="text" id="search-input" placeholder="Rechercher...">
    </div>
    <div id="meeting-list" class="meeting-list">
      <div class="empty-state" style="height: 100px;">
        Chargement...
      </div>
    </div>
    <div class="sidebar-footer">
      <button id="settings-btn" class="btn-icon" title="Paramètres">
        &#9881;
      </button>
    </div>
  </aside>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <span id="close-settings" class="close">&times;</span>
      <h2>Paramètres</h2>
      <div class="form-group">
        <label for="api-url-input">URL de l'API Backend</label>
        <input type="text" id="api-url-input" placeholder="http://localhost:8090">
      </div>
      <div class="form-group">
        <label for="api-token-input">Token API</label>
        <input type="password" id="api-token-input" placeholder="Entrez le token défini dans .env">
      </div>
      <button id="save-settings-btn" class="btn">Enregistrer</button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Header -->
    <header class="content-header">
      <div class="header-title">
        <h2 id="current-title" contenteditable="false">Sélectionnez une réunion</h2>
        <div class="header-meta">
          <span id="current-date">--/--/--</span>
          <span id="current-platform">--</span>
          <span id="current-duration">--:--</span>
        </div>
      </div>
      <div class="header-actions">
        <input type="file" id="file-upload" accept="audio/*,video/*" style="display: none;">
        <button id="upload-btn" class="btn">Importer un fichier</button>
      </div>
    </header>

    <div class="content-body" id="details-view" style="display: none;">

      <!-- Tabs -->
      <div class="tab-bar">
        <button class="tab active" data-tab="transcript">Transcript</button>
        <button class="tab" data-tab="insights">Résumé</button>
        <button class="tab" data-tab="actions">Actions</button>
      </div>

      <!-- Tab: Transcript -->
      <div class="tab-content active" id="tab-transcript">
        <div class="transcript-toolbar" id="transcript-toolbar" style="display: none;">
          <button class="btn btn-small" id="btn-copy">Copier</button>
          <button class="btn btn-small" id="btn-export">Exporter .txt</button>
          <button class="btn btn-small btn-danger" id="btn-delete">Supprimer</button>
        </div>
        <!-- Audio Player -->
        <div id="audio-player-bar" class="audio-player-bar" style="display: none;">
          <audio id="audio-player" preload="metadata"></audio>
          <button id="audio-play-btn" class="audio-btn">&#9654;</button>
          <span id="audio-current-time" class="audio-time">0:00</span>
          <input type="range" id="audio-seek" class="audio-seek" min="0" max="100" value="0" step="0.1">
          <span id="audio-duration" class="audio-time">0:00</span>
          <input type="range" id="audio-volume" class="audio-volume" min="0" max="1" value="1" step="0.05">
        </div>
        <div id="transcript-container" class="scroll-area">
          <!-- Segments injected here -->
        </div>
      </div>

      <!-- Tab: Insights (Summary) -->
      <div class="tab-content" id="tab-insights">
        <div class="scroll-area">
          <div class="insight-card">
            <div class="insight-title">Résumé</div>
            <p id="summary-text" class="summary-text">...</p>
          </div>
          <div class="insight-card" id="topics-card" style="display: none;">
            <div class="insight-title">Topics</div>
            <div id="topics-list"></div>
          </div>
        </div>
      </div>

      <!-- Tab: Actions & Decisions -->
      <div class="tab-content" id="tab-actions">
        <div class="scroll-area">
          <div class="insight-card">
            <div class="insight-title">Actions</div>
            <div id="actions-list">
            </div>
          </div>
          <div class="insight-card">
            <div class="insight-title">Décisions Clés</div>
            <ul id="decisions-list" class="insight-list">
            </ul>
          </div>
        </div>
      </div>

    </div>

    <!-- Empty State for Main View -->
    <div id="main-empty" class="empty-state">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
      </svg>
      <p>Sélectionnez une réunion pour voir les détails</p>
    </div>

  </main>

  <script src="main.js" type="module"></script>
</body>

</html>
