services:
  worker:
    build:
      context: ../../
      dockerfile: gpu-worker/Dockerfile
    image: meetscribe-worker:latest
    container_name: meetscribe-worker
    restart: unless-stopped
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility
    ports:
      - "8001:8001"
    command: ["uv", "run", "python", "gpu-worker/worker_server.py", "--host", "0.0.0.0", "--port", "8001"]

